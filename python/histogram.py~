import sys
import os

import simplejson as json
from collections import Counter

for line in sys.stdin:
    try:
        (url, jrep) = line.split('\t')
        d = json.loads(jrep)
        s = d["hasBodyPart"]["text"]
        histo = Counter()
        for c in s:
            histo[c] += 1
        d["hasBodyPart"]["unicodeHistogram"] = histo

        s = d["hasTitlePart"]["text"]
        histo = Counter()
        for c in s:
            histo[c] += 1
        d["hasTitlePart"]["unicodeHistogram"] = histo

        json.dump(d, sys.stdout, indent=4, sort_keys=True)
    except ValueError as e:
        pass
